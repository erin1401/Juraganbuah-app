<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard | Juragan Buah</title>

<link rel="stylesheet" href="../css/styles.css">
<script src="../js/data.js"></script>
<script src="../js/auth.js"></script>
</head>

<body>

<script>
/* PROTECT MANUAL (AMAN) */
if (!Auth.getUser()) {
  window.location.href = "login.html";
}
</script>

<div class="topbar">
  <img src="../assets/logo.png" height="40">
  <strong>Dashboard</strong>
  <button onclick="Auth.logout()">Logout</button>
</div>

<div class="container">
  <div class="card">
    <h3>Total Penjualan</h3>
    <h1 id="total">Rp 0</h1>
  </div>
</div>

<script>
const sales = DataStore.getSales();
const total = sales.reduce((sum, s) => sum + (s.total || 0), 0);
document.getElementById("total").innerText =
  "Rp " + total.toLocaleString("id-ID");
</script>

</body>
</html>
