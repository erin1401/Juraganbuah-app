<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Master Item</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="../css/styles.css">
</head>
<body>

<div class="app">

<aside class="sidebar">
  <div class="sidebar-header">
    <img src="../assets/logo.png">
    <span>Juragan Buah</span>
  </div>
  <nav class="menu">
    <a href="dashboard.html">Dashboard</a>
    <a class="active" href="items.html">Master Item</a>
    <a href="sales.html">Penjualan</a>
    <a href="report-stock.html">Laporan Stok</a>
  </nav>
</aside>

<main class="content">
<header class="content-header">
  <button id="sidebarToggle">â˜°</button>
  <h2>Master Item</h2>
</header>

<div class="card">
  <input id="itemName" placeholder="Nama Produk">
  <input id="itemPrice" type="number" placeholder="Harga">
  <input id="itemStock" type="number" placeholder="Stok Awal">
  <input id="itemBarcode" placeholder="Barcode">
  <input id="itemImage" type="file" accept="image/*">
  <button class="btn btn-green" onclick="addItem()">Tambah Item</button>
</div>

<div class="card">
<table>
<thead>
<tr><th>Nama</th><th>Harga</th><th>Stok</th><th>Barcode</th></tr>
</thead>
<tbody id="itemTable"></tbody>
</table>
</div>

</main>
</div>

<script>
const items = JSON.parse(localStorage.getItem("items")) || [];

function renderItems() {
  const tb = document.getElementById("itemTable");
  tb.innerHTML = "";
  items.forEach(i => {
    tb.innerHTML += `
      <tr>
        <td>${i.name}</td>
        <td>Rp ${i.price.toLocaleString()}</td>
        <td>${i.stock}</td>
        <td>${i.barcode || "-"}</td>
      </tr>`;
  });
}

function addItem() {
  const name = document.getElementById("itemName").value.trim();
  const price = Number(document.getElementById("itemPrice").value);
  const stock = Number(document.getElementById("itemStock").value);
  const barcode = document.getElementById("itemBarcode").value.trim();

  if (!name || price <= 0) return alert("Data item belum lengkap");

  items.push({ name, price, stock, barcode });
  localStorage.setItem("items", JSON.stringify(items));
  renderItems();

  document.getElementById("itemName").value = "";
  document.getElementById("itemPrice").value = "";
  document.getElementById("itemStock").value = "";
  document.getElementById("itemBarcode").value = "";
}

renderItems();

document.getElementById("sidebarToggle").onclick = () =>
  document.querySelector(".sidebar").classList.toggle("open");
</script>

</body>
</html>
