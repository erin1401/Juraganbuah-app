<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Laporan Persediaan | Juragan Buah</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="../css/styles.css">
<script src="../js/utils.js"></script>
<script src="../js/data.js"></script>

<style>
.section { margin-bottom:25px; }
.section h3 { margin-bottom:10px; }
.print-btn { margin-left:auto; }
</style>
</head>

<body>

<header class="topbar">
  <div class="brand">
    <img src="../assets/logo.png" class="logo">
    <span>Juragan Buah</span>
  </div>
  <div style="display:flex;gap:10px">
    <button class="btn btn-light print-btn" onclick="window.print()">ðŸ–¨ Print</button>
    <a href="dashboard.html" class="btn btn-light">â¬… Dashboard</a>
  </div>
</header>

<main class="container">

<!-- ================= STOK AKTIF ================= -->
<div class="card section">
  <h3>ðŸ“¦ Stok Saat Ini</h3>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Item</th>
          <th>Barcode</th>
          <th>Stok</th>
          <th>Satuan</th>
        </tr>
      </thead>
      <tbody id="currentStock"></tbody>
    </table>
  </div>
</div>

<!-- ================= RIWAYAT MASUK ================= -->
<div class="card section">
  <h3>â¬† Item Masuk</h3>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Tanggal</th>
          <th>Item</th>
          <th>Qty</th>
        </tr>
      </thead>
      <tbody id="stockInTable"></tbody>
    </table>
  </div>
</div>

<!-- ================= RIWAYAT KELUAR ================= -->
<div class="card section">
  <h3>â¬‡ Item Keluar</h3>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Tanggal</th>
          <th>Item</th>
          <th>Qty</th>
        </tr>
      </thead>
      <tbody id="stockOutTable"></tbody>
    </table>
  </div>
</div>

</main>

<script>
/* ================= CURRENT STOCK ================= */
function renderCurrentStock() {
  const items = DataStore.getItems();
  currentStock.innerHTML = "";

  items.forEach(i => {
    currentStock.innerHTML += `
      <tr>
        <td>${i.name}</td>
        <td>${i.barcode || "-"}</td>
        <td>${i.stock}</td>
        <td>${i.unit || "-"}</td>
      </tr>`;
  });
}

/* ================= STOCK IN ================= */
function renderStockIn() {
  const data = DataStore.getStockIn();
  stockInTable.innerHTML = "";

  data.forEach(d => {
    stockInTable.innerHTML += `
      <tr>
        <td>${d.date}</td>
        <td>${d.itemName}</td>
        <td>${d.qty}</td>
      </tr>`;
  });
}

/* ================= STOCK OUT ================= */
function renderStockOut() {
  const data = DataStore.getStockOut();
  stockOutTable.innerHTML = "";

  data.forEach(d => {
    stockOutTable.innerHTML += `
      <tr>
        <td>${d.date}</td>
        <td>${d.itemName}</td>
        <td>${d.qty}</td>
      </tr>`;
  });
}

/* ================= INIT ================= */
document.addEventListener("DOMContentLoaded", () => {
  renderCurrentStock();
  renderStockIn();
  renderStockOut();
});
</script>

</body>
</html>
